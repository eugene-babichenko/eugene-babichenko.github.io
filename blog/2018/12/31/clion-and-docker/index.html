<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="index, follow" name=robots><link href=https://eugene-babichenko.github.io/rss.xml rel=alternate title=RSS type=application/rss+xml><title>Eugene Babichenko | Using CLion to develop C/C++ applications in Docker (or any other remote development)</title><link as=style href=https://eugene-babichenko.github.io/css/style.css rel=preload><link crossorigin href=https://raw.githack.com/Speyll/suCSS/main/reset-min.css rel=stylesheet><link crossorigin href=https://raw.githack.com/Speyll/suCSS/main/suCSS-min.css rel=stylesheet><link href=https://eugene-babichenko.github.io/css/style.css rel=stylesheet><link href=https://eugene-babichenko.github.io/css/custom.css rel=stylesheet><link href=https://eugene-babichenko.github.io/favicon.ico rel=icon><body><nav id=nav-bar><a href=/> /home/ </a><a href=/blog> /blog/ </a><a href=https://github.com/eugene-babichenko> /github/ </a><a href=https://standwithukraine.com.ua/> /ðŸ‡ºðŸ‡¦ Support Ukraine/ </a><div aria-label="Toggle theme" class=theme-toggle data-icon-base=https://eugene-babichenko.github.io/icons.svg data-icon-dark=#darkMode data-icon-light=#lightMode data-sound-src=https://eugene-babichenko.github.io/click.ogg id=theme-toggle role=button tabindex=0><svg class=icon><use id=theme-icon></use></svg></div></nav><main><article class=post><header class=post-header><time datetime=2018-12-31T19:35:00+03:00>Published on: <span class=accent-data>2018-12-31</span> </time><h1>Using CLion to develop C/C++ applications in Docker (or any other remote development)</h1></header><div class=toc-container><h2>Table of content</h2><ul><li><a href=https://eugene-babichenko.github.io/blog/2018/12/31/clion-and-docker/#prerequisites>Prerequisites</a><li><a href=https://eugene-babichenko.github.io/blog/2018/12/31/clion-and-docker/#building-your-dockerfile>Building your Dockerfile</a><li><a href=https://eugene-babichenko.github.io/blog/2018/12/31/clion-and-docker/#clion-setup>CLion setup</a><li><a href=https://eugene-babichenko.github.io/blog/2018/12/31/clion-and-docker/#conclusion>Conclusion</a><li><a href=https://eugene-babichenko.github.io/blog/2018/12/31/clion-and-docker/#acknowledgements>Acknowledgements</a><li><a href=https://eugene-babichenko.github.io/blog/2018/12/31/clion-and-docker/#useful-links>Useful links</a></ul></div><div class=post-content><p>We often use Docker in development for a variety of reasons: to work on the production-like environment, to isolate the application, etc. In particular, I use Docker for Mac to develop applications that are intended to be run on Linux. Along with bash scripts to set up the environment, it allows not to work with VMs (well, virtually, because Docker for Mac runs in the VM that is not exposed to an end-user) and also gives me a bunch of isolated lightweight working environments. Unfortunately, there is a downside: poor IDE support. And while IDEs like PyCharm handle that pretty well with its <a href=https://www.jetbrains.com/help/pycharm/using-docker-as-a-remote-interpreter.html>Remote Interpreters</a> feature, CLion have not gone that far yet. However, there is the <a href=https://www.jetbrains.com/help/clion/remote-projects-support.html>Remote Projects</a> feature that allows us to work on any machine that exposes SSH and ports required by debuggers and any other software. In this tutorial, I will review the Docker-based approach. However, you can omit the Docker part and go with the same setup for your VM or remote server.<h2 id=prerequisites>Prerequisites</h2><ul><li>CLion 2018.3<li>Docker</ul><h2 id=building-your-dockerfile>Building your Dockerfile</h2><p>First of all, we need to define what will you need to install into your development environment:<ul><li><code>rsync</code> if your host is macOS or Linux;<li><code>make</code>, <code>cmake</code>, <code>gdb</code> and compilers -- those are essential;<li>SSH server;<li>Optionally you can add <code>valgrind</code> and any other dependency required by your process.</ul><p>So let's write a simple Dockerfile:<pre class=language-dockerfile data-lang=dockerfile style=color:#c0c5ce;background-color:#2b303b><code class=language-dockerfile data-lang=dockerfile><span style=color:#b48ead>FROM</span><span> ubuntu:bionic
</span><span style=color:#b48ead>RUN </span><span>apt-get update && \
</span><span>    apt-get install -y build-essential cmake gdb openssh-server python
</span><span style=color:#65737e># This allows you to log in as the root user and your password will be `root`
</span><span style=color:#b48ead>RUN </span><span>echo '</span><span style=color:#a3be8c>root:root</span><span>' | chpasswd && \
</span><span>    mkdir /var/run/sshd && \
</span><span>    echo "</span><span style=color:#a3be8c>PermitRootLogin yes</span><span>" >> /etc/ssh/sshd_config
</span><span style=color:#b48ead>EXPOSE </span><span>22 63342
</span><span style=color:#65737e># -D flag runs sshd in foreground
</span><span>CMD ["</span><span style=color:#a3be8c>/usr/sbin/sshd</span><span>", "</span><span style=color:#a3be8c>-D</span><span>"]
</span></code></pre><p>Build it, tag it, run it: <code>docker run -p 2222:22 -p 63342:63342 --security-opt seccomp:unconfined yourimagetag</code>. <code>seccomp:unconfined</code> is required to run a debugger.<p>To verify that you have access to SSH run <code>ssh -p 2222 root@localhost</code>, you should be able to log in with the password root. If you can, then you can move to the next step.<p>You can also combine this approach with <a href=https://docs.docker.com/develop/develop-images/multistage-build/>Docker multi-stage builds</a> to separate your environments.<h2 id=clion-setup>CLion setup</h2><p>This part mostly repeats the <a href=https://www.jetbrains.com/help/clion/remote-projects-support.html>official guide</a> to CLion Remote Project.<ol><li><p>Add a new toolchain. Near the <strong>Name</strong> field select the <strong>Remote host option</strong>. Then enter the SSH credentials of the running container and wait until CLion detects all the software.</p> <p><img alt="CLion remote toolchain setup" src=/assets/2018-12-31-clion-and-docker-image-1.png></p><li><p>Add a new CMake configuration. You just need to copy the existing one and change the toolchain to the one you have added in the previous step.</p> <p><img alt="CLion custom toolchain configuration" src=/assets/2018-12-31-clion-and-docker-image-2.png></p><li><p>Finally, wait for some time until CLion builds the index for the remote environment and switch to it in <strong>Run Configurations</strong>.</p> <p><img alt="Selecting the appropriate run configration" src=/assets/2018-12-31-clion-and-docker-image-4.png></p></ol><h2 id=conclusion>Conclusion</h2><p>Congrats, now you are all set for a painless Docker/remote/VM-based C++ development! This is a pretty good approach until full-featured Docker support arrives in CLion. Now when you want to develop your dockerized application you just need to run your container and wait for CLion to connect to it.<h2 id=acknowledgements>Acknowledgements</h2><ul><li><a href=http://ebagdasa.me/2017-01-20/docker-clion-debugging/>C-program with CLion and Docker containers</a> -- for the general idea.</ul><h2 id=useful-links>Useful links</h2><ul><li><a href=https://www.jetbrains.com/help/clion/remote-projects-support.html>CLion Remote Projects</a></ul></div></article></main><footer><hr><div id=footer-container><p>Made using <a rel="noopener noreferrer" href=https://github.com/Speyll/anemone target=_blank>anemone</a> Zola theme.<p><a title="face icons" href=https://www.flaticon.com/free-icons/face>Face icons created by Freepik - Flaticon</a><p>Â© 2018-2025 Eugene Babichenko</div></footer><script defer src=https://eugene-babichenko.github.io/js/script.js></script>