<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="index, follow" name=robots><link href=https://eugene-babichenko.github.io/rss.xml rel=alternate title=RSS type=application/rss+xml><title>Eugene Babichenko | WezTerm: an actually good config key binding recipe</title><link as=style href=https://eugene-babichenko.github.io/css/style.css rel=preload><link crossorigin href=https://raw.githack.com/Speyll/suCSS/main/reset-min.css rel=stylesheet><link crossorigin href=https://raw.githack.com/Speyll/suCSS/main/suCSS-min.css rel=stylesheet><link href=https://eugene-babichenko.github.io/css/style.css rel=stylesheet><link href=https://eugene-babichenko.github.io/css/custom.css rel=stylesheet><link href=https://eugene-babichenko.github.io/favicon.ico rel=icon><body><nav id=nav-bar><a href=/> /home/ </a><a href=/blog> /blog/ </a><a href=https://github.com/eugene-babichenko> /github/ </a><a href=https://standwithukraine.com.ua/> /ðŸ‡ºðŸ‡¦ Support Ukraine/ </a><div aria-label="Toggle theme" class=theme-toggle data-icon-base=https://eugene-babichenko.github.io/icons.svg data-icon-dark=#darkMode data-icon-light=#lightMode data-sound-src=https://eugene-babichenko.github.io/click.ogg id=theme-toggle role=button tabindex=0><svg class=icon><use id=theme-icon></use></svg></div></nav><main><article class=post><header class=post-header><time datetime=2024-06-03T19:40:00+03:00>Published on: <span class=accent-data>2024-06-03</span> </time><h1>WezTerm: an actually good config key binding recipe</h1></header><div class=post-content><p>While <a href=https://wezfurlong.org/wezterm/>WezTerm</a> is a great terminal with sane defaults, it doesn't provide the default key binding to open the configuration file and edit it. That is understandable, everyone may have their own preference for that. Here we will figure out the recipe that would work everywhere and abide by modern standards.<p>In my opinion, the proper way to go is to open the configuration file with the editor specified in the <code>EDITOR</code> environment variable. I am also using macOS most of the time, so the most natural key binding to configure something is <code>Cmd+,</code>. In many applications this key binding is universal for all operating systems.<p>It is easy to find out where the WezTerm configuration file is located: there is always the <code>WEZTERM_CONFIG_FILE</code> variable. Also there is always the <code>WEZTERM_CONFIG_DIR</code> variable that should allow us to specify the working directory for our editor.<p>The problem with the <code>EDITOR</code> variable is that it may not be immediately accessible to WezTerm config via <code>os.getenv("EDITOR")</code> if it was specified in your shell configuration (e.g. <code>.bashrc</code>) and not it some other magical place. To solve this we will obviously need to load our editor inside the shell, which is conveniently accessible via the <code>SHELL</code> variable.<p>Considering all of the above, we end up with the code like this:<pre class=language-lua data-lang=lua style=color:#c0c5ce;background-color:#2b303b><code class=language-lua data-lang=lua><span style=color:#b48ead>local </span><span style=color:#bf616a>wezterm </span><span>= </span><span style=color:#96b5b4>require</span><span>("</span><span style=color:#a3be8c>wezterm</span><span>")
</span><span style=color:#b48ead>local </span><span style=color:#bf616a>config </span><span>= </span><span style=color:#bf616a>wezterm</span><span>.</span><span style=color:#bf616a>config_builder</span><span>()
</span><span style=color:#bf616a>config</span><span>.keys = {
</span><span>  {
</span><span>    </span><span style=color:#a3be8c>key </span><span>= "</span><span style=color:#a3be8c>,</span><span>",
</span><span>    </span><span style=color:#a3be8c>mods </span><span>= "</span><span style=color:#a3be8c>SUPER</span><span>",
</span><span>    </span><span style=color:#a3be8c>action </span><span>= </span><span style=color:#bf616a>act</span><span>.</span><span style=color:#bf616a>SpawnCommandInNewWindow</span><span>({
</span><span>      </span><span style=color:#a3be8c>cwd </span><span>= os.</span><span style=color:#96b5b4>getenv</span><span>("</span><span style=color:#a3be8c>WEZTERM_CONFIG_DIR</span><span>"),
</span><span>      </span><span style=color:#a3be8c>args </span><span>= { os.</span><span style=color:#96b5b4>getenv</span><span>("</span><span style=color:#a3be8c>SHELL</span><span>"), "</span><span style=color:#a3be8c>-c</span><span>", "</span><span style=color:#a3be8c>$EDITOR $WEZTERM_CONFIG_FILE</span><span>" },
</span><span>    }),
</span><span>  },
</span><span>}
</span></code></pre><p>This greatness of this specific recipe is that it will work regardless of your preferred shell end editor as long as the <code>EDITOR</code> variable is set. The <code>-c</code> flag is accepted by all major *nix shells. Also, regardless of the fact your editor is running with an shell, the window will close immediately after you close the editor. And of course, you can swap <code>SpawnCommandInNewWindow</code> with <code>SpawnCommandInNewTab</code> or any custom <code>SpawnCommand</code> call.</div></article></main><footer><hr><div id=footer-container><p>Made using <a rel="noopener noreferrer" href=https://github.com/Speyll/anemone target=_blank>anemone</a> Zola theme.<p><a title="face icons" href=https://www.flaticon.com/free-icons/face>Face icons created by Freepik - Flaticon</a><p>Â© 2018-2025 Eugene Babichenko</div></footer><script defer src=https://eugene-babichenko.github.io/js/script.js></script>